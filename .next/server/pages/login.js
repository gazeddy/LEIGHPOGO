(()=>{var a={};a.id=295,a.ids=[220,295,636],a.modules={361:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:a=>{"use strict";a.exports=require("react")},2326:a=>{"use strict";a.exports=require("react-dom")},2768:()=>{},3636:(a,b,c)=>{"use strict";c.r(b),c.d(b,{config:()=>v,default:()=>r,getServerSideProps:()=>u,getStaticPaths:()=>t,getStaticProps:()=>s,handler:()=>D,reportWebVitals:()=>w,routeModule:()=>C,unstable_getServerProps:()=>A,unstable_getServerSideProps:()=>B,unstable_getStaticParams:()=>z,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>x});var d={};c.r(d),c.d(d,{default:()=>o,getServerSideProps:()=>p});var e=c(3885),f=c(237),g=c(1413),h=c(3317),i=c.n(h),j=c(6095),k=c(8732),l=c(4722),m=c(2015),n=c(4233);function o({csrfToken:a}){let[b,c]=(0,m.useState)(""),[d,e]=(0,m.useState)(""),[f,g]=(0,m.useState)(""),[h,i]=(0,m.useState)("login"),[j,o]=(0,m.useState)(""),p=(0,n.useRouter)(),q=async a=>{if(a.preventDefault(),o(""),"register"===h){let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f,ign:b,password:d})}),c=await a.json();return a.ok?(alert("Registration successful! Please sign in."),i("login"),void e("")):void o(c.error||"Registration failed")}let c=await (0,l.signIn)("credentials",{redirect:!1,ign:b,password:d});c?.error?o("Invalid IGN or password"):p.push("/")};return(0,k.jsxs)("div",{className:"login-container",children:[(0,k.jsx)("h1",{children:"login"===h?"Login":"Register"}),(0,k.jsxs)("form",{onSubmit:q,children:[(0,k.jsx)("input",{name:"csrfToken",type:"hidden",defaultValue:a}),"register"===h&&(0,k.jsxs)("label",{children:["Name (optional)",(0,k.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"Optional"})]}),(0,k.jsxs)("label",{children:["In-Game Name",(0,k.jsx)("input",{type:"text",value:b,onChange:a=>c(a.target.value),required:!0})]}),(0,k.jsxs)("label",{children:["Password",(0,k.jsx)("input",{type:"password",value:d,onChange:a=>e(a.target.value),required:!0})]}),(0,k.jsx)("button",{type:"submit",children:"login"===h?"Login":"Register"}),j&&(0,k.jsx)("p",{style:{color:"red"},children:j})]}),(0,k.jsx)("p",{style:{marginTop:"1rem"},children:"login"===h?(0,k.jsxs)(k.Fragment,{children:["Don’t have an account?"," ",(0,k.jsx)("button",{onClick:()=>i("register"),children:"Register"})]}):(0,k.jsxs)(k.Fragment,{children:["Already have an account?"," ",(0,k.jsx)("button",{onClick:()=>i("login"),children:"Login"})]})})]})}async function p(a){return await (0,l.getSession)(a)?{redirect:{destination:"/",permanent:!1}}:{props:{csrfToken:await (0,l.getCsrfToken)(a)??null}}}var q=c(2289);let r=(0,g.M)(d,"default"),s=(0,g.M)(d,"getStaticProps"),t=(0,g.M)(d,"getStaticPaths"),u=(0,g.M)(d,"getServerSideProps"),v=(0,g.M)(d,"config"),w=(0,g.M)(d,"reportWebVitals"),x=(0,g.M)(d,"unstable_getStaticProps"),y=(0,g.M)(d,"unstable_getStaticPaths"),z=(0,g.M)(d,"unstable_getStaticParams"),A=(0,g.M)(d,"unstable_getServerProps"),B=(0,g.M)(d,"unstable_getServerSideProps"),C=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/login",pathname:"/login",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:d}),D=(0,q.U)({srcPage:"/login",config:v,userland:d,routeModule:C,getStaticPaths:t,getStaticProps:s,getServerSideProps:u})},3873:a=>{"use strict";a.exports=require("path")},4075:a=>{"use strict";a.exports=require("zlib")},4722:a=>{"use strict";a.exports=require("next-auth/react")},6060:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},6095:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(8732),e=c(4722);c(2768);var f=c(7878);function g({Component:a,pageProps:{session:b,...c}}){return(0,d.jsxs)(e.SessionProvider,{session:b,children:[(0,d.jsx)(f.A,{}),(0,d.jsx)(a,{...c})]})}},7878:(a,b,c)=>{"use strict";c.d(b,{A:()=>l});var d=c(8732),e=c(6761),f=c.n(e),g=c(9918),h=c.n(g),i=c(4722),j=c(2015);let k={src:"/_next/static/media/favicon.36114c8b.ico",height:32,width:32,blurWidth:0,blurHeight:0};function l(){let{data:a,status:b}=(0,i.useSession)(),[c,e]=(0,j.useState)(!1);if("loading"===b)return null;let g=a?.user?.role==="admin";return(0,d.jsx)("nav",{className:"navbar",children:(0,d.jsxs)("div",{className:"nav-inner",children:[(0,d.jsxs)(h(),{href:"/",className:"nav-logo",children:[(0,d.jsx)(f(),{src:k,alt:"Leigh Pok\xe9mon Go Community",className:"nav-favicon"}),(0,d.jsx)("span",{children:"Leigh Pokemon Go Community"})]}),(0,d.jsx)("button",{className:"nav-toggle",onClick:()=>e(!c),children:"☰"}),(0,d.jsxs)("div",{className:`nav-links ${c?"open":""}`,children:[(0,d.jsx)(h(),{href:"/",className:"nav-item",children:"Home"}),(0,d.jsx)(h(),{href:"/search-strings",className:"nav-item",children:"Search Builder"}),(0,d.jsx)(h(),{href:"/pokedex",className:"nav-item",children:"Pok\xe9dex"}),a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h(),{href:"/account",className:"nav-item",children:"Account"}),g&&(0,d.jsx)(h(),{href:"/admin",className:"nav-item",children:"Admin Panel"}),(0,d.jsx)("button",{className:"nav-btn",onClick:()=>(0,i.signOut)({callbackUrl:"/login"}),children:"Logout"})]}),!a&&(0,d.jsx)(h(),{href:"/login",className:"nav-item",children:"Login"})]})]})})}},7910:a=>{"use strict";a.exports=require("stream")},8732:a=>{"use strict";a.exports=require("react/jsx-runtime")},9021:a=>{"use strict";a.exports=require("fs")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[447,238,317,781,233],()=>b(b.s=3636));module.exports=c})();